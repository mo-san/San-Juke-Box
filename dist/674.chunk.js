/*! For license information please see 674.chunk.js.LICENSE.txt */
(self.webpackChunksan_juke_box=self.webpackChunksan_juke_box||[]).push([[674],{9276:function(e,t){!function(e){"use strict";var t=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,n=/(?:(-)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,s=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/gi,r=/(^[#\.][a-z]|[a-y][a-z])/i,i=Math.PI/180,a=180/Math.PI,o=Math.sin,l=Math.cos,c=Math.abs,u=Math.sqrt,h=Math.atan2,p=1e8,d=function(e){return"string"==typeof e},m=function(e){return"number"==typeof e},f={},g={},v=1e5,x=function(e){return Math.round((e+p)%1*v)/v||(e<0?0:1)},T=function(e){return Math.round(e*v)/v||0},y=function(e){return Math.round(1e10*e)/1e10||0},b=function(e,t,n,s){var r=e[t],i=1===s?6:N(r,n,s);if(i&&i+n+2<r.length)return e.splice(t,0,r.slice(0,n+i+2)),r.splice(0,n+i),1},M=function(e,t,n){var s=e.length,r=~~(n*s);if(e[r]>t)for(;--r&&e[r]>t;);else for(;e[++r]<t&&r<s;);return r},w=function(e,t){return t.totalLength=e.totalLength,e.samples?(t.samples=e.samples.slice(0),t.lookup=e.lookup.slice(0),t.minLength=e.minLength,t.resolution=e.resolution):e.totalPoints&&(t.totalPoints=e.totalPoints),t},_=function(e,t){var n=e.length,s=e[n-1]||[],r=s.length;n&&t[0]===s[r-2]&&t[1]===s[r-1]&&(t=s.concat(t.slice(2)),n--),e[n]=t};function S(e){var t,n=(e=d(e)&&r.test(e)&&document.querySelector(e)||e).getAttribute?e:0;return n&&(e=e.getAttribute("d"))?(n._gsPath||(n._gsPath={}),(t=n._gsPath[e])&&!t._dirty?t:n._gsPath[e]=U(e)):e?d(e)?U(e):m(e[0])?[e]:e:console.warn("Expecting a <path> element or an SVG path data string")}function A(e){var t,n=0;for(e.reverse();n<e.length;n+=2)t=e[n],e[n]=e[n+1],e[n+1]=t;e.reversed=!e.reversed}var E={rect:"rx,ry,x,y,width,height",circle:"r,cx,cy",ellipse:"rx,ry,cx,cy",line:"x1,x2,y1,y2"};function R(e,t){var s,r,i,a,o,l,c,u,h,p,d,m,f,g,v,x,T,y,b,M,w,_,S=e.tagName.toLowerCase(),A=.552284749831;return"path"!==S&&e.getBBox?(l=function(e,t){var n,s=document.createElementNS("http://www.w3.org/2000/svg","path"),r=[].slice.call(e.attributes),i=r.length;for(t=","+t+",";--i>-1;)n=r[i].nodeName.toLowerCase(),t.indexOf(","+n+",")<0&&s.setAttributeNS(null,n,r[i].nodeValue);return s}(e,"x,y,width,height,cx,cy,rx,ry,r,x1,x2,y1,y2,points"),_=function(e,t){for(var n=t?t.split(","):[],s={},r=n.length;--r>-1;)s[n[r]]=+e.getAttribute(n[r])||0;return s}(e,E[S]),"rect"===S?(a=_.rx,o=_.ry||a,r=_.x,i=_.y,p=_.width-2*a,d=_.height-2*o,s=a||o?"M"+(x=(g=(f=r+a)+p)+a)+","+(y=i+o)+" V"+(b=y+d)+" C"+[x,M=b+o*A,v=g+a*A,w=b+o,g,w,g-(g-f)/3,w,f+(g-f)/3,w,f,w,m=r+a*(1-A),w,r,M,r,b,r,b-(b-y)/3,r,y+(b-y)/3,r,y,r,T=i+o*(1-A),m,i,f,i,f+(g-f)/3,i,g-(g-f)/3,i,g,i,v,i,x,T,x,y].join(",")+"z":"M"+(r+p)+","+i+" v"+d+" h"+-p+" v"+-d+" h"+p+"z"):"circle"===S||"ellipse"===S?("circle"===S?u=(a=o=_.r)*A:(a=_.rx,u=(o=_.ry)*A),s="M"+((r=_.cx)+a)+","+(i=_.cy)+" C"+[r+a,i+u,r+(c=a*A),i+o,r,i+o,r-c,i+o,r-a,i+u,r-a,i,r-a,i-u,r-c,i-o,r,i-o,r+c,i-o,r+a,i-u,r+a,i].join(",")+"z"):"line"===S?s="M"+_.x1+","+_.y1+" L"+_.x2+","+_.y2:"polyline"!==S&&"polygon"!==S||(s="M"+(r=(h=(e.getAttribute("points")+"").match(n)||[]).shift())+","+(i=h.shift())+" L"+h.join(","),"polygon"===S&&(s+=","+r+","+i+"z")),l.setAttribute("d",B(l._gsRawPath=U(s))),t&&e.parentNode&&(e.parentNode.insertBefore(l,e),e.parentNode.removeChild(e)),l):e}function L(e,t,n){var s,r=e[t],i=e[t+2],o=e[t+4];return r+=(i-r)*n,r+=((i+=(o-i)*n)-r)*n,s=i+(o+(e[t+6]-o)*n-i)*n-r,r=e[t+1],r+=((i=e[t+3])-r)*n,r+=((i+=((o=e[t+5])-i)*n)-r)*n,T(h(i+(o+(e[t+7]-o)*n-i)*n-r,s)*a)}function P(e,t,n){n=void 0===n?1:y(n)||0,t=y(t)||0;var s=Math.max(0,~~(c(n-t)-1e-8)),r=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=w(e[n],e[n].slice(0));return w(e,t)}(e);if(t>n&&(t=1-t,n=1-n,function(e,t){var n=e.length;for(t||e.reverse();n--;)e[n].reversed||A(e[n])}(r),r.totalLength=0),t<0||n<0){var i=Math.abs(~~Math.min(t,n))+1;t+=i,n+=i}r.totalLength||C(r);var a,o,l,u,h,p,d,m,v=n>1,x=I(r,t,f,!0),T=I(r,n,g),M=T.segment,S=x.segment,E=T.segIndex,R=x.segIndex,P=T.i,O=x.i,k=R===E,F=P===O&&k;if(v||s){for(a=E<R||k&&P<O||F&&T.t<x.t,b(r,R,O,x.t)&&(R++,a||(E++,F?(T.t=(T.t-x.t)/(1-x.t),P=0):k&&(P-=O))),1-(n-t)<1e-5?E=R-1:!T.t&&E?E--:b(r,E,P,T.t)&&a&&R++,1===x.t&&(R=(R+1)%r.length),h=[],d=1+(p=r.length)*s,m=R,d+=(p-R+E)%p,u=0;u<d;u++)_(h,r[m++%p]);r=h}else if(l=1===T.t?6:N(M,P,T.t),t!==n)for(o=N(S,O,F?x.t/T.t:x.t),k&&(l+=o),M.splice(P+l+2),(o||O)&&S.splice(0,O+o),u=r.length;u--;)(u<R||u>E)&&r.splice(u,1);else M.angle=L(M,P+l,0),x=M[P+=l],T=M[P+1],M.length=M.totalLength=0,M.totalPoints=r.totalPoints=8,M.push(x,T,x,T,x,T,x,T);return r.totalLength=0,r}function O(e,t,n){t=t||0,e.samples||(e.samples=[],e.lookup=[]);var s,r,i,a,o,l,h,d,m,f,g,v,x,T,y,b,M,w=~~e.resolution||12,_=1/w,S=n?t+6*n+1:e.length,A=e[t],E=e[t+1],R=t?t/6*w:0,L=e.samples,P=e.lookup,O=(t?e.minLength:p)||p,C=L[R+n*w-1],N=t?L[R-1]:0;for(L.length=P.length=0,r=t+2;r<S;r+=6){if(i=e[r+4]-A,a=e[r+2]-A,o=e[r]-A,d=e[r+5]-E,m=e[r+3]-E,f=e[r+1]-E,l=h=g=v=0,c(i)<.01&&c(d)<.01&&c(o)+c(f)<.01)e.length>8&&(e.splice(r,6),r-=6,S-=6);else for(s=1;s<=w;s++)l=h-(h=((T=_*s)*T*i+3*(x=1-T)*(T*a+x*o))*T),g=v-(v=(T*T*d+3*x*(T*m+x*f))*T),(b=u(g*g+l*l))<O&&(O=b),N+=b,L[R++]=N;A+=i,E+=d}if(C)for(C-=N;R<L.length;R++)L[R]+=C;if(L.length&&O){if(e.totalLength=M=L[L.length-1]||0,e.minLength=O,M/O<9999)for(b=y=0,s=0;s<M;s+=O)P[b++]=L[y]<s?++y:y}else e.totalLength=L[0]=0;return t?N-L[t/2-1]:N}function C(e,t){var n,s,r;for(r=n=s=0;r<e.length;r++)e[r].resolution=~~t||12,s+=e[r].length,n+=O(e[r]);return e.totalPoints=s,e.totalLength=n,e}function N(e,t,n){if(n<=0||n>=1)return 0;var s=e[t],r=e[t+1],i=e[t+2],a=e[t+3],o=e[t+4],l=e[t+5],c=s+(i-s)*n,u=i+(o-i)*n,h=r+(a-r)*n,p=a+(l-a)*n,d=c+(u-c)*n,m=h+(p-h)*n,f=o+(e[t+6]-o)*n,g=l+(e[t+7]-l)*n;return u+=(f-u)*n,p+=(g-p)*n,e.splice(t+2,4,T(c),T(h),T(d),T(m),T(d+(u-d)*n),T(m+(p-m)*n),T(u),T(p),T(f),T(g)),e.samples&&e.samples.splice(t/6*e.resolution|0,0,0,0,0,0,0,0),6}function I(e,t,n,s){n=n||{},e.totalLength||C(e),(t<0||t>1)&&(t=x(t));var r,i,a,o,l,c,u,h=0,p=e[0];if(t)if(1===t)u=1,c=(p=e[h=e.length-1]).length-8;else{if(e.length>1){for(a=e.totalLength*t,l=c=0;(l+=e[c++].totalLength)<a;)h=c;t=(a-(o=l-(p=e[h]).totalLength))/(l-o)||0}r=p.samples,i=p.resolution,a=p.totalLength*t,o=(c=p.lookup.length?p.lookup[~~(a/p.minLength)]||0:M(r,a,t))?r[c-1]:0,(l=r[c])<a&&(o=l,l=r[++c]),u=1/i*((a-o)/(l-o)+c%i),c=6*~~(c/i),s&&1===u&&(c+6<p.length?(c+=6,u=0):h+1<e.length&&(c=u=0,p=e[++h]))}else u=c=h=0,p=e[0];return n.t=u,n.i=c,n.path=e,n.segment=p,n.segIndex=h,n}function k(e,t,n,s){var r,i,a,o,l,c,u,h,p,d=e[0],m=s||{};if((t<0||t>1)&&(t=x(t)),e.length>1){for(a=e.totalLength*t,l=c=0;(l+=e[c++].totalLength)<a;)d=e[c];t=(a-(o=l-d.totalLength))/(l-o)||0}return r=d.samples,i=d.resolution,a=d.totalLength*t,o=(c=d.lookup.length?d.lookup[t<1?~~(a/d.minLength):d.lookup.length-1]||0:M(r,a,t))?r[c-1]:0,(l=r[c])<a&&(o=l,l=r[++c]),p=1-(u=1/i*((a-o)/(l-o)+c%i)||0),h=d[c=6*~~(c/i)],m.x=T((u*u*(d[c+6]-h)+3*p*(u*(d[c+4]-h)+p*(d[c+2]-h)))*u+h),m.y=T((u*u*(d[c+7]-(h=d[c+1]))+3*p*(u*(d[c+5]-h)+p*(d[c+3]-h)))*u+h),n&&(m.angle=d.totalLength?L(d,c,u>=1?1-1e-9:u||1e-9):d.angle||0),m}function F(e,t,n,s,r,i,a){for(var o,l,c,u,h,p=e.length;--p>-1;)for(l=(o=e[p]).length,c=0;c<l;c+=2)u=o[c],h=o[c+1],o[c]=u*t+h*s+i,o[c+1]=u*n+h*r+a;return e._dirty=1,e}function H(e,t,n,s,r,a,h,p,d){if(e!==p||t!==d){n=c(n),s=c(s);var m=r%360*i,f=l(m),g=o(m),v=Math.PI,x=2*v,T=(e-p)/2,y=(t-d)/2,b=f*T+g*y,M=-g*T+f*y,w=b*b,_=M*M,S=w/(n*n)+_/(s*s);S>1&&(n=u(S)*n,s=u(S)*s);var A=n*n,E=s*s,R=(A*E-A*_-E*w)/(A*_+E*w);R<0&&(R=0);var L=(a===h?-1:1)*u(R),P=L*(n*M/s),O=L*(-s*b/n),C=(e+p)/2+(f*P-g*O),N=(t+d)/2+(g*P+f*O),I=(b-P)/n,k=(M-O)/s,F=(-b-P)/n,H=(-M-O)/s,U=I*I+k*k,j=(k<0?-1:1)*Math.acos(I/u(U)),D=(I*H-k*F<0?-1:1)*Math.acos((I*F+k*H)/u(U*(F*F+H*H)));isNaN(D)&&(D=v),!h&&D>0?D-=x:h&&D<0&&(D+=x),j%=x,D%=x;var B,G=Math.ceil(c(D)/(x/4)),V=[],K=D/G,z=4/3*o(K/2)/(1+l(K/2)),X=f*n,Y=g*n,W=g*-s,q=f*s;for(B=0;B<G;B++)b=l(r=j+B*K),M=o(r),I=l(r+=K),k=o(r),V.push(b-z*M,M+z*b,I+z*k,k-z*I,I,k);for(B=0;B<V.length;B+=2)b=V[B],M=V[B+1],V[B]=b*X+M*W+C,V[B+1]=b*Y+M*q+N;return V[B-2]=p,V[B-1]=d,V}}function U(e){var n,r,i,a,o,l,u,h,p,d,m,f,g,v,x,T=(e+"").replace(s,(function(e){var t=+e;return t<1e-4&&t>-1e-4?0:t})).match(t)||[],y=[],b=0,M=0,w=2/3,_=T.length,S=0,A="ERROR: malformed path: "+e,E=function(e,t,n,s){d=(n-e)/3,m=(s-t)/3,u.push(e+d,t+m,n-d,s-m,n,s)};if(!e||!isNaN(T[0])||isNaN(T[1]))return console.log(A),y;for(n=0;n<_;n++)if(g=o,isNaN(T[n])?l=(o=T[n].toUpperCase())!==T[n]:n--,i=+T[n+1],a=+T[n+2],l&&(i+=b,a+=M),n||(h=i,p=a),"M"===o)u&&(u.length<8?y.length-=1:S+=u.length),b=h=i,M=p=a,u=[i,a],y.push(u),n+=2,o="L";else if("C"===o)u||(u=[0,0]),l||(b=M=0),u.push(i,a,b+1*T[n+3],M+1*T[n+4],b+=1*T[n+5],M+=1*T[n+6]),n+=6;else if("S"===o)d=b,m=M,"C"!==g&&"S"!==g||(d+=b-u[u.length-4],m+=M-u[u.length-3]),l||(b=M=0),u.push(d,m,i,a,b+=1*T[n+3],M+=1*T[n+4]),n+=4;else if("Q"===o)d=b+(i-b)*w,m=M+(a-M)*w,l||(b=M=0),b+=1*T[n+3],M+=1*T[n+4],u.push(d,m,b+(i-b)*w,M+(a-M)*w,b,M),n+=4;else if("T"===o)d=b-u[u.length-4],m=M-u[u.length-3],u.push(b+d,M+m,i+(b+1.5*d-i)*w,a+(M+1.5*m-a)*w,b=i,M=a),n+=2;else if("H"===o)E(b,M,b=i,M),n+=1;else if("V"===o)E(b,M,b,M=i+(l?M-b:0)),n+=1;else if("L"===o||"Z"===o)"Z"===o&&(i=h,a=p,u.closed=!0),("L"===o||c(b-i)>.5||c(M-a)>.5)&&(E(b,M,i,a),"L"===o&&(n+=2)),b=i,M=a;else if("A"===o){if(v=T[n+4],x=T[n+5],d=T[n+6],m=T[n+7],r=7,v.length>1&&(v.length<3?(m=d,d=x,r--):(m=x,d=v.substr(2),r-=2),x=v.charAt(1),v=v.charAt(0)),f=H(b,M,+T[n+1],+T[n+2],+T[n+3],+v,+x,(l?b:0)+1*d,(l?M:0)+1*m),n+=r,f)for(r=0;r<f.length;r++)u.push(f[r]);b=u[u.length-2],M=u[u.length-1]}else console.log(A);return(n=u.length)<6?(y.pop(),n=0):u[0]===u[n-2]&&u[1]===u[n-1]&&(u.closed=!0),y.totalPoints=S+n,y}function j(e,t){void 0===t&&(t=1);for(var n=e[0],s=0,r=[n,s],i=2;i<e.length;i+=2)r.push(n,s,e[i],s=(e[i]-n)*t/2,n=e[i],-s);return r}function D(e,t,n){c(e[0]-e[2])<1e-4&&c(e[1]-e[3])<1e-4&&(e=e.slice(2));var s,r,i,a,p,d,m,f,g,v,x,y,b,M,w=e.length-2,_=+e[0],S=+e[1],A=+e[2],E=+e[3],R=[_,S,_,S],L=A-_,P=E-S,O=Math.abs(e[w]-_)<.001&&Math.abs(e[w+1]-S)<.001;for(isNaN(n)&&(n=Math.PI/10),O&&(e.push(A,E),A=_,E=S,_=e[w-2],S=e[w-1],e.unshift(_,S),w+=4),t=t||0===t?+t:1,p=2;p<w;p+=2)s=_,r=S,_=A,S=E,A=+e[p+2],E=+e[p+3],_===A&&S===E||(y=(d=L)*d+(f=P)*f,b=(L=A-_)*L+(P=E-S)*P,M=(m=A-s)*m+(g=E-r)*g,x=(i=Math.acos((y+b-M)/u(4*y*b)))/Math.PI*t,v=u(y)*x,x*=u(b),_===s&&S===r||(i>n?(a=h(g,m),R.push(T(_-l(a)*v),T(S-o(a)*v),T(_),T(S),T(_+l(a)*x),T(S+o(a)*x))):(a=h(f,d),R.push(T(_-l(a)*v),T(S-o(a)*v)),a=h(P,L),R.push(T(_),T(S),T(_+l(a)*x),T(S+o(a)*x)))));return _!==A||S!==E||R.length<4?R.push(T(A),T(E),T(A),T(E)):R.length-=2,O&&(R.splice(0,6),R.length=R.length-6),R}function B(e){m(e[0])&&(e=[e]);var t,n,s,r,i="",a=e.length;for(n=0;n<a;n++){for(r=e[n],i+="M"+T(r[0])+","+T(r[1])+" C",t=r.length,s=2;s<t;s++)i+=T(r[s++])+","+T(r[s++])+" "+T(r[s++])+","+T(r[s++])+" "+T(r[s++])+","+T(r[s])+" ";r.closed&&(i+="z")}return i}var G,V,K,z,X,Y,W,q,Z,Q="transform",J=Q+"Origin",$=function(e){var t=e.ownerDocument||e;!(Q in e.style)&&"msTransform"in e.style&&(J=(Q="msTransform")+"Origin");for(;t.parentNode&&(t=t.parentNode););if(V=window,W=new oe,t){G=t,K=t.documentElement,z=t.body,(q=G.createElementNS("http://www.w3.org/2000/svg","g")).style.transform="none";var n=t.createElement("div"),s=t.createElement("div");z.appendChild(n),n.appendChild(s),n.style.position="static",n.style[Q]="translate3d(0,0,1px)",Z=s.offsetParent!==n,z.removeChild(n)}return t},ee=[],te=[],ne=function(e){return e.ownerSVGElement||("svg"===(e.tagName+"").toLowerCase()?e:null)},se=function e(t){return"fixed"===V.getComputedStyle(t).position||((t=t.parentNode)&&1===t.nodeType?e(t):void 0)},re=function e(t,n){if(t.parentNode&&(G||$(t))){var s=ne(t),r=s?s.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",i=s?n?"rect":"g":"div",a=2!==n?0:100,o=3===n?100:0,l="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",c=G.createElementNS?G.createElementNS(r.replace(/^https/,"http"),i):G.createElement(i);return n&&(s?(Y||(Y=e(t)),c.setAttribute("width",.01),c.setAttribute("height",.01),c.setAttribute("transform","translate("+a+","+o+")"),Y.appendChild(c)):(X||((X=e(t)).style.cssText=l),c.style.cssText=l+"width:0.1px;height:0.1px;top:"+o+"px;left:"+a+"px",X.appendChild(c))),c}throw"Need document and parent."},ie=function(e,t){var n,s,r,i,a,o,l=ne(e),c=e===l,u=l?ee:te,h=e.parentNode;if(e===V)return e;if(u.length||u.push(re(e,1),re(e,2),re(e,3)),n=l?Y:X,l)c?(i=-(r=function(e){var t,n=e.getCTM();return n||(t=e.style[Q],e.style[Q]="none",e.appendChild(q),n=q.getCTM(),e.removeChild(q),t?e.style[Q]=t:e.style.removeProperty(Q.replace(/([A-Z])/g,"-$1").toLowerCase())),n}(e)).e/r.a,a=-r.f/r.d,s=W):(r=e.getBBox(),i=(s=(s=e.transform?e.transform.baseVal:{}).numberOfItems?s.numberOfItems>1?function(e){for(var t=new oe,n=0;n<e.numberOfItems;n++)t.multiply(e.getItem(n).matrix);return t}(s):s.getItem(0).matrix:W).a*r.x+s.c*r.y,a=s.b*r.x+s.d*r.y),t&&"g"===e.tagName.toLowerCase()&&(i=a=0),(c?l:h).appendChild(n),n.setAttribute("transform","matrix("+s.a+","+s.b+","+s.c+","+s.d+","+(s.e+i)+","+(s.f+a)+")");else{if(i=a=0,Z)for(s=e.offsetParent,r=e;r&&(r=r.parentNode)&&r!==s&&r.parentNode;)(V.getComputedStyle(r)[Q]+"").length>4&&(i=r.offsetLeft,a=r.offsetTop,r=0);if("absolute"!==(o=V.getComputedStyle(e)).position&&"fixed"!==o.position)for(s=e.offsetParent;h&&h!==s;)i+=h.scrollLeft||0,a+=h.scrollTop||0,h=h.parentNode;(r=n.style).top=e.offsetTop-a+"px",r.left=e.offsetLeft-i+"px",r[Q]=o[Q],r[J]=o[J],r.position="fixed"===o.position?"fixed":"absolute",e.parentNode.appendChild(n)}return n},ae=function(e,t,n,s,r,i,a){return e.a=t,e.b=n,e.c=s,e.d=r,e.e=i,e.f=a,e},oe=function(){function e(e,t,n,s,r,i){void 0===e&&(e=1),void 0===t&&(t=0),void 0===n&&(n=0),void 0===s&&(s=1),void 0===r&&(r=0),void 0===i&&(i=0),ae(this,e,t,n,s,r,i)}var t=e.prototype;return t.inverse=function(){var e=this.a,t=this.b,n=this.c,s=this.d,r=this.e,i=this.f,a=e*s-t*n||1e-10;return ae(this,s/a,-t/a,-n/a,e/a,(n*i-s*r)/a,-(e*i-t*r)/a)},t.multiply=function(e){var t=this.a,n=this.b,s=this.c,r=this.d,i=this.e,a=this.f,o=e.a,l=e.c,c=e.b,u=e.d,h=e.e,p=e.f;return ae(this,o*t+c*s,o*n+c*r,l*t+u*s,l*n+u*r,i+h*t+p*s,a+h*n+p*r)},t.clone=function(){return new e(this.a,this.b,this.c,this.d,this.e,this.f)},t.equals=function(e){var t=this.a,n=this.b,s=this.c,r=this.d,i=this.e,a=this.f;return t===e.a&&n===e.b&&s===e.c&&r===e.d&&i===e.e&&a===e.f},t.apply=function(e,t){void 0===t&&(t={});var n=e.x,s=e.y,r=this.a,i=this.b,a=this.c,o=this.d,l=this.e,c=this.f;return t.x=n*r+s*a+l||0,t.y=n*i+s*o+c||0,t},e}();function le(e,t,n,s){if(!e||!e.parentNode||(G||$(e)).documentElement===e)return new oe;var r=function(e){for(var t,n;e&&e!==z;)(n=e._gsap)&&n.uncache&&n.get(e,"x"),n&&!n.scaleX&&!n.scaleY&&n.renderTransform&&(n.scaleX=n.scaleY=1e-4,n.renderTransform(1,n),t?t.push(n):t=[n]),e=e.parentNode;return t}(e),i=ne(e)?ee:te,a=ie(e,n),o=i[0].getBoundingClientRect(),l=i[1].getBoundingClientRect(),c=i[2].getBoundingClientRect(),u=a.parentNode,h=!s&&se(e),p=new oe((l.left-o.left)/100,(l.top-o.top)/100,(c.left-o.left)/100,(c.top-o.top)/100,o.left+(h?0:V.pageXOffset||G.scrollLeft||K.scrollLeft||z.scrollLeft||0),o.top+(h?0:V.pageYOffset||G.scrollTop||K.scrollTop||z.scrollTop||0));if(u.removeChild(a),r)for(o=r.length;o--;)(l=r[o]).scaleX=l.scaleY=0,l.renderTransform(1,l);return t?p.inverse():p}var ce,ue,he,pe,de="x,translateX,left,marginLeft,xPercent".split(","),me="y,translateY,top,marginTop,yPercent".split(","),fe=Math.PI/180,ge=function(e,t,n,s){for(var r=t.length,i=2===s?0:s,a=0;a<r;a++)e[i]=parseFloat(t[a][n]),2===s&&(e[i+1]=0),i+=2;return e},ve=function(e,t,n){return parseFloat(e._gsap.get(e,t,n||"px"))||0},xe=function(e){var t,n=e[0],s=e[1];for(t=2;t<e.length;t+=2)n=e[t]+=n,s=e[t+1]+=s},Te=function(e,t,n,s,r,i,a,o,l){return"cubic"===a.type?t=[t]:(!1!==a.fromCurrent&&t.unshift(ve(n,s,o),r?ve(n,r,l):0),a.relative&&xe(t),t=[(r?D:j)(t,a.curviness)]),t=i(_e(t,n,a)),Se(e,n,s,t,"x",o),r&&Se(e,n,r,t,"y",l),C(t,a.resolution||(0===a.curviness?20:12))},ye=function(e){return e},be=/[-+\.]*\d+[\.e\-\+]*\d*[e\-\+]*\d*/g,Me=function(e,t,n){var s,r,i,a=le(e);return"svg"===(e.tagName+"").toLowerCase()?(r=(s=e.viewBox.baseVal).x,i=s.y,s.width||(s={width:+e.getAttribute("width"),height:+e.getAttribute("height")})):(s=t&&e.getBBox&&e.getBBox(),r=i=0),t&&"auto"!==t&&(r+=t.push?t[0]*(s?s.width:e.offsetWidth||0):t.x,i+=t.push?t[1]*(s?s.height:e.offsetHeight||0):t.y),n.apply(r||i?a.apply({x:r,y:i}):{x:a.e,y:a.f})},we=function(e,t,n,s){var r,i=le(e.parentNode,!0,!0),a=i.clone().multiply(le(t)),o=Me(e,n,i),l=Me(t,s,i),c=l.x,u=l.y;return a.e=a.f=0,"auto"===s&&t.getTotalLength&&"path"===t.tagName.toLowerCase()&&(r=t.getAttribute("d").match(be)||[],c+=(r=a.apply({x:+r[0],y:+r[1]})).x,u+=r.y),(r||t.getBBox&&e.getBBox&&t.ownerSVGElement===e.ownerSVGElement)&&(c-=(r=a.apply(t.getBBox())).x,u-=r.y),a.e=c-o.x,a.f=u-o.y,a},_e=function(e,t,n){var s,r,i,a=n.align,o=n.matrix,l=n.offsetX,c=n.offsetY,u=n.alignOrigin,h=e[0][0],p=e[0][1],d=ve(t,"x"),m=ve(t,"y");return e&&e.length?(a&&("self"===a||(s=pe(a)[0]||t)===t?F(e,1,0,0,1,d-h,m-p):(u&&!1!==u[2]?ce.set(t,{transformOrigin:100*u[0]+"% "+100*u[1]+"%"}):u=[ve(t,"xPercent")/-100,ve(t,"yPercent")/-100],i=(r=we(t,s,u,"auto")).apply({x:h,y:p}),F(e,r.a,r.b,r.c,r.d,d+r.e-(i.x-r.e),m+r.f-(i.y-r.f)))),o?F(e,o.a,o.b,o.c,o.d,o.e,o.f):(l||c)&&F(e,1,0,0,1,l||0,c||0),e):S("M0,0L0,0")},Se=function(e,t,n,s,r,i){var a=t._gsap,o=a.harness,l=o&&o.aliases&&o.aliases[n],c=l&&l.indexOf(",")<0?l:n,u=e._pt=new ue(e._pt,t,c,0,0,ye,0,a.set(t,c,e));u.u=he(a.get(t,c,i))||0,u.path=s,u.pp=r,e._props.push(c)},Ae={version:"3.7.1",name:"motionPath",register:function(e,t,n){he=(ce=e).utils.getUnit,pe=ce.utils.toArray,ue=n},init:function(e,t){if(!ce)return console.warn("Please gsap.registerPlugin(MotionPathPlugin)"),!1;"object"==typeof t&&!t.style&&t.path||(t={path:t});var n,s,r,i,a=[],o=t,l=o.path,c=o.autoRotate,u=o.unitX,h=o.unitY,p=o.x,d=o.y,m=l[0],f=(r=t.start,i="end"in t?t.end:1,function(e){return r||1!==i?P(e,r,i):e});if(this.rawPaths=a,this.target=e,(this.rotate=c||0===c)&&(this.rOffset=parseFloat(c)||0,this.radians=!!t.useRadians,this.rProp=t.rotation||"rotation",this.rSet=e._gsap.set(e,this.rProp,this),this.ru=he(e._gsap.get(e,this.rProp))||0),Array.isArray(l)&&!("closed"in l)&&"number"!=typeof m){for(s in m)!p&&~de.indexOf(s)?p=s:!d&&~me.indexOf(s)&&(d=s);for(s in p&&d?a.push(Te(this,ge(ge([],l,p,0),l,d,1),e,p,d,f,t,u||he(l[0][p]),h||he(l[0][d]))):p=d=0,m)s!==p&&s!==d&&a.push(Te(this,ge([],l,s,2),e,s,0,f,t,he(l[0][s])))}else C(n=f(_e(S(t.path),e,t)),t.resolution),a.push(n),Se(this,e,t.x||"x",n,"x",t.unitX||"px"),Se(this,e,t.y||"y",n,"y",t.unitY||"px")},render:function(e,t){var n=t.rawPaths,s=n.length,r=t._pt;for(e>1?e=1:e<0&&(e=0);s--;)k(n[s],e,!s&&t.rotate,n[s]);for(;r;)r.set(r.t,r.p,r.path[r.pp]+r.u,r.d,e),r=r._next;t.rotate&&t.rSet(t.target,t.rProp,n[0].angle*(t.radians?fe:1)+t.rOffset+t.ru,t,e)},getLength:function(e){return C(S(e)).totalLength},sliceRawPath:P,getRawPath:S,pointsToSegment:D,stringToRawPath:U,rawPathToString:B,transformRawPath:F,getGlobalMatrix:le,getPositionOnPath:k,cacheRawPathMeasurements:C,convertToPath:function(e,t){return pe(e).map((function(e){return R(e,!1!==t)}))},convertCoordinates:function(e,t,n){var s=le(t,!0,!0).multiply(le(e));return n?s.apply(n):s},getAlignMatrix:we,getRelativePosition:function(e,t,n,s){var r=we(e,t,n,s);return{x:r.e,y:r.f}},arrayToRawPath:function(e,t){var n=ge(ge([],e,(t=t||{}).x||"x",0),e,t.y||"y",1);return t.relative&&xe(n),["cubic"===t.type?n:D(n,t.curviness)]}};(ce||"undefined"!=typeof window&&(ce=window.gsap)&&ce.registerPlugin&&ce)&&ce.registerPlugin(Ae),e.MotionPathPlugin=Ae,e.default=Ae,Object.defineProperty(e,"__esModule",{value:!0})}(t)},913:(e,t,n)=>{"use strict";function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{z:()=>a});var r=n(1396);const i=(e,t)=>(e%t+t)%t;class a extends r.EventDispatcher{constructor(e,t){super(),s(this,"object",void 0),s(this,"domElement",void 0),s(this,"enabled",!0),s(this,"target",new r.Vector3),s(this,"minDistance",0),s(this,"maxDistance",1/0),s(this,"minZoom",0),s(this,"maxZoom",1/0),s(this,"minPolarAngle",0),s(this,"maxPolarAngle",Math.PI),s(this,"minAzimuthAngle",-1/0),s(this,"maxAzimuthAngle",1/0),s(this,"enableDamping",!1),s(this,"dampingFactor",.05),s(this,"enableZoom",!0),s(this,"zoomSpeed",1),s(this,"enableRotate",!0),s(this,"rotateSpeed",1),s(this,"enablePan",!0),s(this,"panSpeed",1),s(this,"screenSpacePanning",!0),s(this,"keyPanSpeed",7),s(this,"autoRotate",!1),s(this,"autoRotateSpeed",2),s(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),s(this,"mouseButtons",{LEFT:r.MOUSE.ROTATE,MIDDLE:r.MOUSE.DOLLY,RIGHT:r.MOUSE.PAN}),s(this,"touches",{ONE:r.TOUCH.ROTATE,TWO:r.TOUCH.DOLLY_PAN}),s(this,"target0",void 0),s(this,"position0",void 0),s(this,"zoom0",void 0),s(this,"_domElementKeyEvents",null),s(this,"getPolarAngle",void 0),s(this,"getAzimuthalAngle",void 0),s(this,"setPolarAngle",void 0),s(this,"setAzimuthalAngle",void 0),s(this,"listenToKeyEvents",void 0),s(this,"saveState",void 0),s(this,"reset",void 0),s(this,"update",void 0),s(this,"connect",void 0),s(this,"dispose",void 0),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof r.PerspectiveCamera?this.object.zoom:1,this.getPolarAngle=()=>p.phi,this.getAzimuthalAngle=()=>p.theta,this.setPolarAngle=e=>{let t=i(e,2*Math.PI),s=p.phi;s<0&&(s+=2*Math.PI),t<0&&(t+=2*Math.PI);let r=Math.abs(t-s);2*Math.PI-r<r&&(t<s?t+=2*Math.PI:s+=2*Math.PI),d.phi=t-s,n.update()},this.setAzimuthalAngle=e=>{let t=i(e,2*Math.PI),s=p.theta;s<0&&(s+=2*Math.PI),t<0&&(t+=2*Math.PI);let r=Math.abs(t-s);2*Math.PI-r<r&&(t<s?t+=2*Math.PI:s+=2*Math.PI),d.theta=t-s,n.update()},this.listenToKeyEvents=e=>{e.addEventListener("keydown",q),this._domElementKeyEvents=e},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object instanceof r.PerspectiveCamera?n.object.zoom:1},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object instanceof r.PerspectiveCamera&&(n.object.zoom=n.zoom0,n.object.updateProjectionMatrix()),n.dispatchEvent(a),n.update(),u=c.NONE},this.update=(()=>{const t=new r.Vector3,s=(new r.Quaternion).setFromUnitVectors(e.up,new r.Vector3(0,1,0)),i=s.clone().invert(),o=new r.Vector3,l=new r.Quaternion,v=2*Math.PI;return function(){const e=n.object.position;t.copy(e).sub(n.target),t.applyQuaternion(s),p.setFromVector3(t),n.autoRotate&&u===c.NONE&&L(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(p.theta+=d.theta*n.dampingFactor,p.phi+=d.phi*n.dampingFactor):(p.theta+=d.theta,p.phi+=d.phi);let r=n.minAzimuthAngle,x=n.maxAzimuthAngle;return isFinite(r)&&isFinite(x)&&(r<-Math.PI?r+=v:r>Math.PI&&(r-=v),x<-Math.PI?x+=v:x>Math.PI&&(x-=v),p.theta=r<=x?Math.max(r,Math.min(x,p.theta)):p.theta>(r+x)/2?Math.max(r,p.theta):Math.min(x,p.theta)),p.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,p.phi)),p.makeSafe(),p.radius*=m,p.radius=Math.max(n.minDistance,Math.min(n.maxDistance,p.radius)),!0===n.enableDamping?n.target.addScaledVector(f,n.dampingFactor):n.target.add(f),t.setFromSpherical(p),t.applyQuaternion(i),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(d.theta*=1-n.dampingFactor,d.phi*=1-n.dampingFactor,f.multiplyScalar(1-n.dampingFactor)):(d.set(0,0,0),f.set(0,0,0)),m=1,!!(g||o.distanceToSquared(n.object.position)>h||8*(1-l.dot(n.object.quaternion))>h)&&(n.dispatchEvent(a),o.copy(n.object.position),l.copy(n.object.quaternion),g=!1,!0)}})(),this.connect=e=>{e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),n.domElement=e,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",Z),n.domElement.addEventListener("pointerdown",K),n.domElement.addEventListener("pointercancel",Y),n.domElement.addEventListener("wheel",W)},this.dispose=()=>{var e,t,s,r,i,a;null===(e=n.domElement)||void 0===e||e.removeEventListener("contextmenu",Z),null===(t=n.domElement)||void 0===t||t.removeEventListener("pointerdown",K),null===(s=n.domElement)||void 0===s||s.removeEventListener("pointercancel",Y),null===(r=n.domElement)||void 0===r||r.removeEventListener("wheel",W),null===(i=n.domElement)||void 0===i||i.ownerDocument.removeEventListener("pointermove",z),null===(a=n.domElement)||void 0===a||a.ownerDocument.removeEventListener("pointerup",X),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",q)};const n=this,a={type:"change"},o={type:"start"},l={type:"end"},c={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let u=c.NONE;const h=1e-6,p=new r.Spherical,d=new r.Spherical;let m=1;const f=new r.Vector3;let g=!1;const v=new r.Vector2,x=new r.Vector2,T=new r.Vector2,y=new r.Vector2,b=new r.Vector2,M=new r.Vector2,w=new r.Vector2,_=new r.Vector2,S=new r.Vector2,A=[],E={};function R(){return Math.pow(.95,n.zoomSpeed)}function L(e){d.theta-=e}function P(e){d.phi-=e}const O=(()=>{const e=new r.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),f.add(e)}})(),C=(()=>{const e=new r.Vector3;return function(t,s){!0===n.screenSpacePanning?e.setFromMatrixColumn(s,1):(e.setFromMatrixColumn(s,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),f.add(e)}})(),N=(()=>{const e=new r.Vector3;return function(t,s){const i=n.domElement;if(i&&n.object instanceof r.PerspectiveCamera&&n.object.isPerspectiveCamera){const r=n.object.position;e.copy(r).sub(n.target);let a=e.length();a*=Math.tan(n.object.fov/2*Math.PI/180),O(2*t*a/i.clientHeight,n.object.matrix),C(2*s*a/i.clientHeight,n.object.matrix)}else i&&n.object instanceof r.OrthographicCamera&&n.object.isOrthographicCamera?(O(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),C(s*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function I(e){n.object instanceof r.PerspectiveCamera&&n.object.isPerspectiveCamera?m/=e:n.object instanceof r.OrthographicCamera&&n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),g=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function k(e){n.object instanceof r.PerspectiveCamera&&n.object.isPerspectiveCamera?m*=e:n.object instanceof r.OrthographicCamera&&n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),g=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function F(e){v.set(e.clientX,e.clientY)}function H(e){y.set(e.clientX,e.clientY)}function U(){if(1==A.length)v.set(A[0].pageX,A[0].pageY);else{const e=.5*(A[0].pageX+A[1].pageX),t=.5*(A[0].pageY+A[1].pageY);v.set(e,t)}}function j(){if(1==A.length)y.set(A[0].pageX,A[0].pageY);else{const e=.5*(A[0].pageX+A[1].pageX),t=.5*(A[0].pageY+A[1].pageY);y.set(e,t)}}function D(){const e=A[0].pageX-A[1].pageX,t=A[0].pageY-A[1].pageY,n=Math.sqrt(e*e+t*t);w.set(0,n)}function B(e){if(1==A.length)x.set(e.pageX,e.pageY);else{const t=$(e),n=.5*(e.pageX+t.x),s=.5*(e.pageY+t.y);x.set(n,s)}T.subVectors(x,v).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(L(2*Math.PI*T.x/t.clientHeight),P(2*Math.PI*T.y/t.clientHeight)),v.copy(x)}function G(e){if(1==A.length)b.set(e.pageX,e.pageY);else{const t=$(e),n=.5*(e.pageX+t.x),s=.5*(e.pageY+t.y);b.set(n,s)}M.subVectors(b,y).multiplyScalar(n.panSpeed),N(M.x,M.y),y.copy(b)}function V(e){const t=$(e),s=e.pageX-t.x,r=e.pageY-t.y,i=Math.sqrt(s*s+r*r);_.set(0,i),S.set(0,Math.pow(_.y/w.y,n.zoomSpeed)),I(S.y),w.copy(_)}function K(e){var t,s;!1!==n.enabled&&(0===A.length&&(null===(t=n.domElement)||void 0===t||t.ownerDocument.addEventListener("pointermove",z),null===(s=n.domElement)||void 0===s||s.ownerDocument.addEventListener("pointerup",X)),function(e){A.push(e)}(e),"touch"===e.pointerType?function(e){switch(J(e),A.length){case 1:switch(n.touches.ONE){case r.TOUCH.ROTATE:if(!1===n.enableRotate)return;U(),u=c.TOUCH_ROTATE;break;case r.TOUCH.PAN:if(!1===n.enablePan)return;j(),u=c.TOUCH_PAN;break;default:u=c.NONE}break;case 2:switch(n.touches.TWO){case r.TOUCH.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&D(),n.enablePan&&j(),u=c.TOUCH_DOLLY_PAN;break;case r.TOUCH.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&D(),n.enableRotate&&U(),u=c.TOUCH_DOLLY_ROTATE;break;default:u=c.NONE}break;default:u=c.NONE}u!==c.NONE&&n.dispatchEvent(o)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case r.MOUSE.DOLLY:if(!1===n.enableZoom)return;!function(e){w.set(e.clientX,e.clientY)}(e),u=c.DOLLY;break;case r.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;H(e),u=c.PAN}else{if(!1===n.enableRotate)return;F(e),u=c.ROTATE}break;case r.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;F(e),u=c.ROTATE}else{if(!1===n.enablePan)return;H(e),u=c.PAN}break;default:u=c.NONE}u!==c.NONE&&n.dispatchEvent(o)}(e))}function z(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(J(e),u){case c.TOUCH_ROTATE:if(!1===n.enableRotate)return;B(e),n.update();break;case c.TOUCH_PAN:if(!1===n.enablePan)return;G(e),n.update();break;case c.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&V(e),n.enablePan&&G(e)}(e),n.update();break;case c.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&V(e),n.enableRotate&&B(e)}(e),n.update();break;default:u=c.NONE}}(e):function(e){if(!1!==n.enabled)switch(u){case c.ROTATE:if(!1===n.enableRotate)return;!function(e){x.set(e.clientX,e.clientY),T.subVectors(x,v).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(L(2*Math.PI*T.x/t.clientHeight),P(2*Math.PI*T.y/t.clientHeight)),v.copy(x),n.update()}(e);break;case c.DOLLY:if(!1===n.enableZoom)return;!function(e){_.set(e.clientX,e.clientY),S.subVectors(_,w),S.y>0?I(R()):S.y<0&&k(R()),w.copy(_),n.update()}(e);break;case c.PAN:if(!1===n.enablePan)return;!function(e){b.set(e.clientX,e.clientY),M.subVectors(b,y).multiplyScalar(n.panSpeed),N(M.x,M.y),y.copy(b),n.update()}(e)}}(e))}function X(e){var t,s;!1!==n.enabled&&(e.pointerType,n.dispatchEvent(l),u=c.NONE,Q(e),0===A.length&&(null===(t=n.domElement)||void 0===t||t.ownerDocument.removeEventListener("pointermove",z),null===(s=n.domElement)||void 0===s||s.ownerDocument.removeEventListener("pointerup",X)))}function Y(e){Q(e)}function W(e){!1===n.enabled||!1===n.enableZoom||u!==c.NONE&&u!==c.ROTATE||(e.preventDefault(),n.dispatchEvent(o),function(e){e.deltaY<0?k(R()):e.deltaY>0&&I(R()),n.update()}(e),n.dispatchEvent(l))}function q(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:N(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:N(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:N(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:N(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function Z(e){!1!==n.enabled&&e.preventDefault()}function Q(e){delete E[e.pointerId];for(let t=0;t<A.length;t++)if(A[t].pointerId==e.pointerId)return void A.splice(t,1)}function J(e){let t=E[e.pointerId];void 0===t&&(t=new r.Vector2,E[e.pointerId]=t),t.set(e.pageX,e.pageY)}function $(e){const t=e.pointerId===A[0].pointerId?A[1]:A[0];return E[t.pointerId]}void 0!==t&&this.connect(t),this.update()}}},552:(e,t,n)=>{"use strict";n.d(t,{M:()=>r});var s=n(1396);const r=function(e,t){t=t||{},this.enabled=!0;const n=void 0!==t.defaultThickness?t.defaultThickness:.003,r=(new s.Color).fromArray(void 0!==t.defaultColor?t.defaultColor:[0,0,0]),i=void 0!==t.defaultAlpha?t.defaultAlpha:1,a=void 0!==t.defaultKeepAlive&&t.defaultKeepAlive,o={},l={},c={},u={outlineThickness:{value:n},outlineColor:{value:r},outlineAlpha:{value:i}},h=["#include <common>","#include <uv_pars_vertex>","#include <displacementmap_pars_vertex>","#include <fog_pars_vertex>","#include <morphtarget_pars_vertex>","#include <skinning_pars_vertex>","#include <logdepthbuf_pars_vertex>","#include <clipping_planes_pars_vertex>","uniform float outlineThickness;","vec4 calculateOutline( vec4 pos, vec3 normal, vec4 skinned ) {","\tfloat thickness = outlineThickness;","\tconst float ratio = 1.0;","\tvec4 pos2 = projectionMatrix * modelViewMatrix * vec4( skinned.xyz + normal, 1.0 );","\tvec4 norm = normalize( pos - pos2 );","\treturn pos + norm * thickness * pos.w * ratio;","}","void main() {","\t#include <uv_vertex>","\t#include <beginnormal_vertex>","\t#include <morphnormal_vertex>","\t#include <skinbase_vertex>","\t#include <skinnormal_vertex>","\t#include <begin_vertex>","\t#include <morphtarget_vertex>","\t#include <skinning_vertex>","\t#include <displacementmap_vertex>","\t#include <project_vertex>","\tvec3 outlineNormal = - objectNormal;","\tgl_Position = calculateOutline( gl_Position, outlineNormal, vec4( transformed, 1.0 ) );","\t#include <logdepthbuf_vertex>","\t#include <clipping_planes_vertex>","\t#include <fog_vertex>","}"].join("\n"),p=["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","#include <clipping_planes_pars_fragment>","uniform vec3 outlineColor;","uniform float outlineAlpha;","void main() {","\t#include <clipping_planes_fragment>","\t#include <logdepthbuf_fragment>","\tgl_FragColor = vec4( outlineColor, outlineAlpha );","\t#include <tonemapping_fragment>","\t#include <encodings_fragment>","\t#include <fog_fragment>","\t#include <premultiplied_alpha_fragment>","}"].join("\n");function d(e){const t=function(e){let t=o[e.uuid];return void 0===t&&(t={material:new s.ShaderMaterial({type:"OutlineEffect",uniforms:s.UniformsUtils.merge([s.UniformsLib.fog,s.UniformsLib.displacementmap,u]),vertexShader:h,fragmentShader:p,side:s.BackSide}),used:!0,keepAlive:a,count:0},o[e.uuid]=t),t.used=!0,t.material}(e);return l[t.uuid]=e,function(e,t){if("invisible"===e.name)return;const n=t.userData.outlineParameters;e.skinning=t.skinning,e.morphTargets=t.morphTargets,e.morphNormals=t.morphNormals,e.fog=t.fog,e.toneMapped=t.toneMapped,e.premultipliedAlpha=t.premultipliedAlpha,e.displacementMap=t.displacementMap,void 0!==n?(!1===t.visible?e.visible=!1:e.visible=void 0===n.visible||n.visible,e.transparent=void 0!==n.alpha&&n.alpha<1||t.transparent,void 0!==n.keepAlive&&(o[t.uuid].keepAlive=n.keepAlive)):(e.transparent=t.transparent,e.visible=t.visible),!0!==t.wireframe&&!1!==t.depthTest||(e.visible=!1),t.clippingPlanes&&(e.clipping=!0,e.clippingPlanes=t.clippingPlanes,e.clipIntersection=t.clipIntersection,e.clipShadows=t.clipShadows),e.version=t.version}(t,e),t}function m(e){const t=e.geometry;let n=!1;return void 0!==e.geometry&&(n=!t.isBufferGeometry||void 0!==t.attributes.normal),!0===e.isMesh&&void 0!==e.material&&!0===n}function f(e){if(!1!==m(e)){if(Array.isArray(e.material))for(let t=0,n=e.material.length;t<n;t++)e.material[t]=d(e.material[t]);else e.material=d(e.material);c[e.uuid]=e.onBeforeRender,e.onBeforeRender=v}}function g(e){if(!1!==m(e)){if(Array.isArray(e.material))for(let t=0,n=e.material.length;t<n;t++)e.material[t]=l[e.material[t].uuid];else e.material=l[e.material.uuid];e.onBeforeRender=c[e.uuid]}}function v(e,t,n,s,r){const i=l[r.uuid];void 0!==i&&function(e,t){const n=t.userData.outlineParameters;e.uniforms.outlineAlpha.value=t.opacity,void 0!==n&&(void 0!==n.thickness&&(e.uniforms.outlineThickness.value=n.thickness),void 0!==n.color&&e.uniforms.outlineColor.value.fromArray(n.color),void 0!==n.alpha&&(e.uniforms.outlineAlpha.value=n.alpha)),t.displacementMap&&(e.uniforms.displacementMap.value=t.displacementMap,e.uniforms.displacementScale.value=t.displacementScale,e.uniforms.displacementBias.value=t.displacementBias)}(r,i)}this.render=function(t,n){let s,r=!1;if(void 0!==arguments[2]&&(console.warn("THREE.OutlineEffect.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),s=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.OutlineEffect.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),void 0!==s&&e.setRenderTarget(s),r&&e.clear(),!1===this.enabled)return void e.render(t,n);const i=e.autoClear;e.autoClear=this.autoClear,e.render(t,n),e.autoClear=i,this.renderOutline(t,n)},this.renderOutline=(t,n)=>{const s=e.autoClear,r=t.autoUpdate,i=t.background,a=e.shadowMap.enabled;t.autoUpdate=!1,t.background=null,e.autoClear=!1,e.shadowMap.enabled=!1,t.traverse(f),e.render(t,n),t.traverse(g),function(){let e;e=Object.keys(l);for(let t=0,n=e.length;t<n;t++)l[e[t]]=void 0;e=Object.keys(c);for(let t=0,n=e.length;t<n;t++)c[e[t]]=void 0;e=Object.keys(o);for(let t=0,n=e.length;t<n;t++){const n=e[t];!1===o[n].used?(o[n].count++,!1===o[n].keepAlive&&o[n].count>60&&delete o[n]):(o[n].used=!1,o[n].count=0)}}(),t.autoUpdate=r,t.background=i,e.autoClear=s,e.shadowMap.enabled=a},this.autoClear=e.autoClear,this.domElement=e.domElement,this.shadowMap=e.shadowMap,this.clear=(t,n,s)=>{e.clear(t,n,s)},this.getPixelRatio=()=>e.getPixelRatio(),this.setPixelRatio=t=>{e.setPixelRatio(t)},this.getSize=t=>e.getSize(t),this.setSize=(t,n,s)=>{e.setSize(t,n,s)},this.setViewport=(t,n,s,r)=>{e.setViewport(t,n,s,r)},this.setScissor=(t,n,s,r)=>{e.setScissor(t,n,s,r)},this.setScissorTest=t=>{e.setScissorTest(t)},this.setRenderTarget=t=>{e.setRenderTarget(t)}}},7607:(e,t,n)=>{"use strict";n.d(t,{E:()=>r});var s=n(1396);class r extends s.Loader{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new c(e)})),this.register((function(e){return new m(e)})),this.register((function(e){return new f(e)})),this.register((function(e){return new u(e)})),this.register((function(e){return new h(e)})),this.register((function(e){return new p(e)})),this.register((function(e){return new d(e)})),this.register((function(e){return new o(e)})),this.register((function(e){return new g(e)}))}load(e,t,n,r){const i=this;let a;a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:s.LoaderUtils.extractUrlBase(e),this.manager.itemStart(e);const o=function(t){r?r(t):console.error(t),i.manager.itemError(e),i.manager.itemEnd(e)},l=new s.FileLoader(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,(function(n){try{i.parse(n,a,(function(n){t(n),i.manager.itemEnd(e)}),o)}catch(e){o(e)}}),n,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let i;const o={},c={};if("string"==typeof e)i=e;else if(s.LoaderUtils.decodeText(new Uint8Array(e,0,4))===v){try{o[a.KHR_BINARY_GLTF]=new x(e)}catch(e){return void(r&&r(e))}i=o[a.KHR_BINARY_GLTF].content}else i=s.LoaderUtils.decodeText(new Uint8Array(e));const u=JSON.parse(i);if(void 0===u.asset||u.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const h=new j(u,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let e=0;e<this.pluginCallbacks.length;e++){const t=this.pluginCallbacks[e](h);c[t.name]=t,o[t.name]=!0}if(u.extensionsUsed)for(let e=0;e<u.extensionsUsed.length;++e){const t=u.extensionsUsed[e],n=u.extensionsRequired||[];switch(t){case a.KHR_MATERIALS_UNLIT:o[t]=new l;break;case a.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[t]=new M;break;case a.KHR_DRACO_MESH_COMPRESSION:o[t]=new T(u,this.dracoLoader);break;case a.KHR_TEXTURE_TRANSFORM:o[t]=new y;break;case a.KHR_MESH_QUANTIZATION:o[t]=new w;break;default:n.indexOf(t)>=0&&void 0===c[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}h.setExtensions(o),h.setPlugins(c),h.parse(n,r)}}function i(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const a={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class o{constructor(e){this.parser=e,this.name=a.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,s=t.length;n<s;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const i=t.json,a=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e];let o;const l=new s.Color(16777215);void 0!==a.color&&l.fromArray(a.color);const c=void 0!==a.range?a.range:0;switch(a.type){case"directional":o=new s.DirectionalLight(l),o.target.position.set(0,0,-1),o.add(o.target);break;case"point":o=new s.PointLight(l),o.distance=c;break;case"spot":o=new s.SpotLight(l),o.distance=c,a.spot=a.spot||{},a.spot.innerConeAngle=void 0!==a.spot.innerConeAngle?a.spot.innerConeAngle:0,a.spot.outerConeAngle=void 0!==a.spot.outerConeAngle?a.spot.outerConeAngle:Math.PI/4,o.angle=a.spot.outerConeAngle,o.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,o.target.position.set(0,0,-1),o.add(o.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return o.position.set(0,0,0),o.decay=2,void 0!==a.intensity&&(o.intensity=a.intensity),o.name=t.createUniqueName(a.name||"light_"+e),r=Promise.resolve(o),t.cache.add(n,r),r}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],r=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then((function(e){return n._getNodeRef(t.cache,r,e)}))}}class l{constructor(){this.name=a.KHR_MATERIALS_UNLIT}getMaterialType(){return s.MeshBasicMaterial}extendParams(e,t,n){const r=[];e.color=new s.Color(1,1,1),e.opacity=1;const i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const t=i.baseColorFactor;e.color.fromArray(t),e.opacity=t[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture))}return Promise.all(r)}}class c{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?s.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){const e=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new s.Vector2(e,-e)}return Promise.all(i)}}class u{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?s.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],i=s.extensions[this.name];return void 0!==i.transmissionFactor&&(t.transmission=i.transmissionFactor),void 0!==i.transmissionTexture&&r.push(n.assignTexture(t,"transmissionMap",i.transmissionTexture)),Promise.all(r)}}class h{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?s.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];t.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&i.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||0;const o=a.attenuationColor||[1,1,1];return t.attenuationTint=new s.Color(o[0],o[1],o[2]),Promise.all(i)}}class p{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?s.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=n.extensions[this.name];return t.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class d{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?s.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];t.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&i.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));const o=a.specularColorFactor||[1,1,1];return t.specularTint=new s.Color(o[0],o[1],o[2]),void 0!==a.specularColorTexture&&i.push(n.assignTexture(t,"specularTintMap",a.specularColorTexture).then((function(e){e.encoding=s.sRGBEncoding}))),Promise.all(i)}}class m{constructor(e){this.parser=e,this.name=a.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,s=n.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],i=n.images[r.source],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i,a)}}class f{constructor(e){this.parser=e,this.name=a.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,s=n.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const i=r.extensions[t],a=s.images[i.source];let o=n.textureLoader;if(a.uri){const e=n.options.manager.getHandler(a.uri);null!==e&&(o=e)}return this.detectSupport().then((function(r){if(r)return n.loadTextureImage(e,a,o);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class g{constructor(e){this.name=a.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],s=this.parser.getDependency("buffer",e.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([s,r.ready]).then((function(t){const n=e.byteOffset||0,s=e.byteLength||0,i=e.count,a=e.byteStride,o=new ArrayBuffer(i*a),l=new Uint8Array(t[0],n,s);return r.decodeGltfBuffer(new Uint8Array(o),i,a,l,e.mode,e.filter),o}))}return null}}const v="glTF";class x{constructor(e){this.name=a.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:s.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==v)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,r=new DataView(e,12);let i=0;for(;i<n;){const t=r.getUint32(i,!0);i+=4;const n=r.getUint32(i,!0);if(i+=4,1313821514===n){const n=new Uint8Array(e,12+i,t);this.content=s.LoaderUtils.decodeText(n)}else if(5130562===n){const n=12+i;this.body=e.slice(n,n+t)}i+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class T{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=a.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,s=this.dracoLoader,r=e.extensions[this.name].bufferView,i=e.extensions[this.name].attributes,a={},o={},l={};for(const e in i){const t=L[e]||e.toLowerCase();a[t]=i[e]}for(const t in e.attributes){const s=L[t]||t.toLowerCase();if(void 0!==i[t]){const r=n.accessors[e.attributes[t]],i=S[r.componentType];l[s]=i,o[s]=!0===r.normalized}}return t.getDependency("bufferView",r).then((function(e){return new Promise((function(t){s.decodeDracoFile(e,(function(e){for(const t in e.attributes){const n=e.attributes[t],s=o[t];void 0!==s&&(n.normalized=s)}t(e)}),a,l)}))}))}}class y{constructor(){this.name=a.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class b extends s.MeshStandardMaterial{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),i=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),a=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),o={specular:{value:(new s.Color).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=o,this.onBeforeCompile=function(e){for(const t in o)e.uniforms[t]=o[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",i).replace("#include <lights_physical_fragment>",a)},Object.defineProperties(this,{specular:{get:function(){return o.specular.value},set:function(e){o.specular.value=e}},specularMap:{get:function(){return o.specularMap.value},set:function(e){o.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return o.glossiness.value},set:function(e){o.glossiness.value=e}},glossinessMap:{get:function(){return o.glossinessMap.value},set:function(e){o.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class M{constructor(){this.name=a.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return b}extendParams(e,t,n){const r=t.extensions[this.name];e.color=new s.Color(1,1,1),e.opacity=1;const i=[];if(Array.isArray(r.diffuseFactor)){const t=r.diffuseFactor;e.color.fromArray(t),e.opacity=t[3]}if(void 0!==r.diffuseTexture&&i.push(n.assignTexture(e,"map",r.diffuseTexture)),e.emissive=new s.Color(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new s.Color(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){const t=r.specularGlossinessTexture;i.push(n.assignTexture(e,"glossinessMap",t)),i.push(n.assignTexture(e,"specularMap",t))}return Promise.all(i)}createMaterial(e){const t=new b(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=s.TangentSpaceNormalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class w{constructor(){this.name=a.KHR_MESH_QUANTIZATION}}class _ extends s.Interpolant{constructor(e,t,n,s){super(e,t,n,s)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,s=this.valueSize,r=e*s*3+s;for(let e=0;e!==s;e++)t[e]=n[r+e];return t}}_.prototype.beforeStart_=_.prototype.copySampleValue_,_.prototype.afterEnd_=_.prototype.copySampleValue_,_.prototype.interpolate_=function(e,t,n,s){const r=this.resultBuffer,i=this.sampleValues,a=this.valueSize,o=2*a,l=3*a,c=s-t,u=(n-t)/c,h=u*u,p=h*u,d=e*l,m=d-l,f=-2*p+3*h,g=p-h,v=1-f,x=g-h+u;for(let e=0;e!==a;e++){const t=i[m+e+a],n=i[m+e+o]*c,s=i[d+e+a],l=i[d+e]*c;r[e]=v*t+x*n+f*s+g*l}return r};const S={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},A={9728:s.NearestFilter,9729:s.LinearFilter,9984:s.NearestMipmapNearestFilter,9985:s.LinearMipmapNearestFilter,9986:s.NearestMipmapLinearFilter,9987:s.LinearMipmapLinearFilter},E={33071:s.ClampToEdgeWrapping,33648:s.MirroredRepeatWrapping,10497:s.RepeatWrapping},R={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},L={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},P={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},O={CUBICSPLINE:void 0,LINEAR:s.InterpolateLinear,STEP:s.InterpolateDiscrete};function C(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}function N(e,t,n){for(const s in n.extensions)void 0===e[s]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[s]=n.extensions[s])}function I(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function k(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,s=t.weights.length;n<s;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,s=n.length;t<s;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function F(e){const t=e.extensions&&e.extensions[a.KHR_DRACO_MESH_COMPRESSION];let n;return n=t?"draco:"+t.bufferView+":"+t.indices+":"+H(t.attributes):e.indices+":"+H(e.attributes)+":"+e.mode,n}function H(e){let t="";const n=Object.keys(e).sort();for(let s=0,r=n.length;s<r;s++)t+=n[s]+":"+e[n[s]]+";";return t}function U(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class j{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new i,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},"undefined"!=typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new s.ImageBitmapLoader(this.options.manager):this.textureLoader=new s.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new s.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,s=this.json,r=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){const i={scene:t[0][s.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:s.asset,parser:n,userData:{}};N(r,i,s),I(i,s),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(i)}))).then((function(){e(i)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let n=0,s=t.length;n<s;n++){const s=t[n].joints;for(let t=0,n=s.length;t<n;t++)e[s[t]].isBone=!0}for(let t=0,s=e.length;t<s;t++){const s=e[t];void 0!==s.mesh&&(this._addNodeRef(this.meshCache,s.mesh),void 0!==s.skin&&(n[s.mesh].isSkinnedMesh=!0)),void 0!==s.camera&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const s=n.clone();return s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const s=e(t[n]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let s=0;s<t.length;s++){const r=e(t[s]);r&&n.push(r)}return n}getDependency(e,t){const n=e+":"+t;let s=this.cache.get(n);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this.loadNode(t);break;case"mesh":s=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":s=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":s=this.loadSkin(t);break;case"animation":s=this.loadAnimation(t);break;case"camera":s=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,s=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(s.map((function(t,s){return n.getDependency(e,s)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[a.KHR_BINARY_GLTF].body);const s=this.options;return new Promise((function(e,r){n.load(C(t.uri,s.path),e,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const n=t.byteLength||0,s=t.byteOffset||0;return e.slice(s,s+n)}))}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);const i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then((function(e){const i=e[0],a=R[r.type],o=S[r.componentType],l=o.BYTES_PER_ELEMENT,c=l*a,u=r.byteOffset||0,h=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,p=!0===r.normalized;let d,m;if(h&&h!==c){const e=Math.floor(u/h),n="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+e+":"+r.count;let c=t.cache.get(n);c||(d=new o(i,e*h,r.count*h/l),c=new s.InterleavedBuffer(d,h/l),t.cache.add(n,c)),m=new s.InterleavedBufferAttribute(c,a,u%h/l,p)}else d=null===i?new o(r.count*a):new o(i,u,r.count*a),m=new s.BufferAttribute(d,a,p);if(void 0!==r.sparse){const t=R.SCALAR,n=S[r.sparse.indices.componentType],l=r.sparse.indices.byteOffset||0,c=r.sparse.values.byteOffset||0,u=new n(e[1],l,r.sparse.count*t),h=new o(e[2],c,r.sparse.count*a);null!==i&&(m=new s.BufferAttribute(m.array.slice(),m.itemSize,m.normalized));for(let e=0,t=u.length;e<t;e++){const t=u[e];if(m.setX(t,h[e*a]),a>=2&&m.setY(t,h[e*a+1]),a>=3&&m.setZ(t,h[e*a+2]),a>=4&&m.setW(t,h[e*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m}))}loadTexture(e){const t=this.json,n=this.options,s=t.textures[e],r=t.images[s.source];let i=this.textureLoader;if(r.uri){const e=n.manager.getHandler(r.uri);null!==e&&(i=e)}return this.loadTextureImage(e,r,i)}loadTextureImage(e,t,n){const r=this,i=this.json,a=this.options,o=i.textures[e],l=(t.uri||t.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=self.URL||self.webkitURL;let u=t.uri||"",h=!1,p=!0;const d=u.search(/\.jpe?g($|\?)/i)>0||0===u.search(/^data\:image\/jpeg/);if(("image/jpeg"===t.mimeType||d)&&(p=!1),void 0!==t.bufferView)u=r.getDependency("bufferView",t.bufferView).then((function(e){if("image/png"===t.mimeType){const t=new DataView(e,25,1).getUint8(0,!1);p=6===t||4===t||3===t}h=!0;const n=new Blob([e],{type:t.mimeType});return u=c.createObjectURL(n),u}));else if(void 0===t.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const m=Promise.resolve(u).then((function(e){return new Promise((function(t,r){let i=t;!0===n.isImageBitmapLoader&&(i=function(e){const n=new s.Texture(e);n.needsUpdate=!0,t(n)}),n.load(C(e,a.path),i,void 0,r)}))})).then((function(t){!0===h&&c.revokeObjectURL(u),t.flipY=!1,o.name&&(t.name=o.name),p||(t.format=s.RGBFormat);const n=(i.samplers||{})[o.sampler]||{};return t.magFilter=A[n.magFilter]||s.LinearFilter,t.minFilter=A[n.minFilter]||s.LinearMipmapLinearFilter,t.wrapS=E[n.wrapS]||s.RepeatWrapping,t.wrapT=E[n.wrapT]||s.RepeatWrapping,r.associations.set(t,{type:"textures",index:e}),t})).catch((function(){return console.error("THREE.GLTFLoader: Couldn't load texture",u),null}));return this.textureCache[l]=m,m}assignTexture(e,t,n){const s=this;return this.getDependency("texture",n.index).then((function(r){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),s.extensions[a.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[a.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=s.associations.get(r);r=s.extensions[a.KHR_TEXTURE_TRANSFORM].extendTexture(r,e),s.associations.set(r,t)}}return e[t]=r,r}))}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=void 0!==t.attributes.tangent,i=void 0!==t.attributes.color,a=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new s.PointsMaterial,s.Material.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new s.LineBasicMaterial,s.Material.prototype.copy.call(t,n),t.color.copy(n.color),this.cache.add(e,t)),n=t}if(r||i||a){let e="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(e+="specular-glossiness:"),r&&(e+="vertex-tangents:"),i&&(e+="vertex-colors:"),a&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),i&&(t.vertexColors=!0),a&&(t.flatShading=!0),r&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}getMaterialType(){return s.MeshStandardMaterial}loadMaterial(e){const t=this,n=this.json,r=this.extensions,i=n.materials[e];let o;const l={},c=i.extensions||{},u=[];if(c[a.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const e=r[a.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=e.getMaterialType(),u.push(e.extendParams(l,i,t))}else if(c[a.KHR_MATERIALS_UNLIT]){const e=r[a.KHR_MATERIALS_UNLIT];o=e.getMaterialType(),u.push(e.extendParams(l,i,t))}else{const n=i.pbrMetallicRoughness||{};if(l.color=new s.Color(1,1,1),l.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;l.color.fromArray(e),l.opacity=e[3]}void 0!==n.baseColorTexture&&u.push(t.assignTexture(l,"map",n.baseColorTexture)),l.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,l.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(u.push(t.assignTexture(l,"metalnessMap",n.metallicRoughnessTexture)),u.push(t.assignTexture(l,"roughnessMap",n.metallicRoughnessTexture))),o=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),u.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,l)}))))}!0===i.doubleSided&&(l.side=s.DoubleSide);const h=i.alphaMode||"OPAQUE";return"BLEND"===h?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,"MASK"===h&&(l.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5)),void 0!==i.normalTexture&&o!==s.MeshBasicMaterial&&(u.push(t.assignTexture(l,"normalMap",i.normalTexture)),l.normalScale=new s.Vector2(1,-1),void 0!==i.normalTexture.scale&&l.normalScale.set(i.normalTexture.scale,-i.normalTexture.scale)),void 0!==i.occlusionTexture&&o!==s.MeshBasicMaterial&&(u.push(t.assignTexture(l,"aoMap",i.occlusionTexture)),void 0!==i.occlusionTexture.strength&&(l.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&o!==s.MeshBasicMaterial&&(l.emissive=(new s.Color).fromArray(i.emissiveFactor)),void 0!==i.emissiveTexture&&o!==s.MeshBasicMaterial&&u.push(t.assignTexture(l,"emissiveMap",i.emissiveTexture)),Promise.all(u).then((function(){let n;return n=o===b?r[a.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(l):new o(l),i.name&&(n.name=i.name),n.map&&(n.map.encoding=s.sRGBEncoding),n.emissiveMap&&(n.emissiveMap.encoding=s.sRGBEncoding),I(n,i),t.associations.set(n,{type:"materials",index:e}),i.extensions&&N(r,n,i),n}))}createUniqueName(e){const t=s.PropertyBinding.sanitizeNodeName(e||"");let n=t;for(let e=1;this.nodeNamesUsed[n];++e)n=t+"_"+e;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function i(e){return n[a.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return B(n,e,t)}))}const o=[];for(let n=0,l=e.length;n<l;n++){const l=e[n],c=F(l),u=r[c];if(u)o.push(u.promise);else{let e;e=l.extensions&&l.extensions[a.KHR_DRACO_MESH_COMPRESSION]?i(l):B(new s.BufferGeometry,l,t),r[c]={primitive:l,promise:e},o.push(e)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,r=this.extensions,i=n.meshes[e],a=i.primitives,o=[];for(let e=0,t=a.length;e<t;e++){const t=void 0===a[e].material?(void 0===(l=this.cache).DefaultMaterial&&(l.DefaultMaterial=new s.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:s.FrontSide})),l.DefaultMaterial):this.getDependency("material",a[e].material);o.push(t)}var l;return o.push(t.loadGeometries(a)),Promise.all(o).then((function(n){const o=n.slice(0,n.length-1),l=n[n.length-1],c=[];for(let n=0,u=l.length;n<u;n++){const u=l[n],h=a[n];let p;const d=o[n];if(4===h.mode||5===h.mode||6===h.mode||void 0===h.mode)p=!0===i.isSkinnedMesh?new s.SkinnedMesh(u,d):new s.Mesh(u,d),!0!==p.isSkinnedMesh||p.geometry.attributes.skinWeight.normalized||p.normalizeSkinWeights(),5===h.mode?p.geometry=G(p.geometry,s.TriangleStripDrawMode):6===h.mode&&(p.geometry=G(p.geometry,s.TriangleFanDrawMode));else if(1===h.mode)p=new s.LineSegments(u,d);else if(3===h.mode)p=new s.Line(u,d);else if(2===h.mode)p=new s.LineLoop(u,d);else{if(0!==h.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+h.mode);p=new s.Points(u,d)}Object.keys(p.geometry.morphAttributes).length>0&&k(p,i),p.name=t.createUniqueName(i.name||"mesh_"+e),I(p,i),h.extensions&&N(r,p,h),t.assignFinalMaterial(p),c.push(p)}if(1===c.length)return c[0];const u=new s.Group;for(let e=0,t=c.length;e<t;e++)u.add(c[e]);return u}))}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new s.PerspectiveCamera(s.MathUtils.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new s.OrthographicCamera(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),I(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))}loadAnimation(e){const t=this.json.animations[e],n=[],r=[],i=[],a=[],o=[];for(let e=0,s=t.channels.length;e<s;e++){const s=t.channels[e],l=t.samplers[s.sampler],c=s.target,u=void 0!==c.node?c.node:c.id,h=void 0!==t.parameters?t.parameters[l.input]:l.input,p=void 0!==t.parameters?t.parameters[l.output]:l.output;n.push(this.getDependency("node",u)),r.push(this.getDependency("accessor",h)),i.push(this.getDependency("accessor",p)),a.push(l),o.push(c)}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(i),Promise.all(a),Promise.all(o)]).then((function(n){const r=n[0],i=n[1],a=n[2],o=n[3],l=n[4],c=[];for(let e=0,t=r.length;e<t;e++){const t=r[e],n=i[e],u=a[e],h=o[e],p=l[e];if(void 0===t)continue;let d;switch(t.updateMatrix(),t.matrixAutoUpdate=!0,P[p.path]){case P.weights:d=s.NumberKeyframeTrack;break;case P.rotation:d=s.QuaternionKeyframeTrack;break;default:d=s.VectorKeyframeTrack}const m=t.name?t.name:t.uuid,f=void 0!==h.interpolation?O[h.interpolation]:s.InterpolateLinear,g=[];P[p.path]===P.weights?t.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&g.push(e.name?e.name:e.uuid)})):g.push(m);let v=u.array;if(u.normalized){const e=U(v.constructor),t=new Float32Array(v.length);for(let n=0,s=v.length;n<s;n++)t[n]=v[n]*e;v=t}for(let e=0,t=g.length;e<t;e++){const t=new d(g[e]+"."+P[p.path],n.array,v,f);"CUBICSPLINE"===h.interpolation&&(t.createInterpolant=function(e){return new _(this.times,this.values,this.getValueSize()/3,e)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),c.push(t)}}const u=t.name?t.name:"animation_"+e;return new s.AnimationClip(u,void 0,c)}))}createNodeMesh(e){const t=this.json,n=this,s=t.nodes[e];return void 0===s.mesh?null:n.getDependency("mesh",s.mesh).then((function(e){const t=n._getNodeRef(n.meshCache,s.mesh,e);return void 0!==s.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,n=s.weights.length;t<n;t++)e.morphTargetInfluences[t]=s.weights[t]})),t}))}loadNode(e){const t=this.json,n=this.extensions,r=this,i=t.nodes[e],a=i.name?r.createUniqueName(i.name):"";return function(){const t=[],n=r._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return n&&t.push(n),void 0!==i.camera&&t.push(r.getDependency("camera",i.camera).then((function(e){return r._getNodeRef(r.cameraCache,i.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){let o;if(o=!0===i.isBone?new s.Bone:t.length>1?new s.Group:1===t.length?t[0]:new s.Object3D,o!==t[0])for(let e=0,n=t.length;e<n;e++)o.add(t[e]);if(i.name&&(o.userData.name=i.name,o.name=a),I(o,i),i.extensions&&N(n,o,i),void 0!==i.matrix){const e=new s.Matrix4;e.fromArray(i.matrix),o.applyMatrix4(e)}else void 0!==i.translation&&o.position.fromArray(i.translation),void 0!==i.rotation&&o.quaternion.fromArray(i.rotation),void 0!==i.scale&&o.scale.fromArray(i.scale);return r.associations.set(o,{type:"nodes",index:e}),o}))}loadScene(e){const t=this.json,n=this.extensions,r=this.json.scenes[e],i=this,a=new s.Group;r.name&&(a.name=i.createUniqueName(r.name)),I(a,r),r.extensions&&N(n,a,r);const o=r.nodes||[],l=[];for(let e=0,n=o.length;e<n;e++)l.push(D(o[e],a,t,i));return Promise.all(l).then((function(){return a}))}}function D(e,t,n,r){const i=n.nodes[e];return r.getDependency("node",e).then((function(e){if(void 0===i.skin)return e;let t;return r.getDependency("skin",i.skin).then((function(e){t=e;const n=[];for(let e=0,s=t.joints.length;e<s;e++)n.push(r.getDependency("node",t.joints[e]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(!e.isMesh)return;const r=[],i=[];for(let e=0,a=n.length;e<a;e++){const a=n[e];if(a){r.push(a);const n=new s.Matrix4;void 0!==t.inverseBindMatrices&&n.fromArray(t.inverseBindMatrices.array,16*e),i.push(n)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[e])}e.bind(new s.Skeleton(r,i),e.matrixWorld)})),e}))})).then((function(e){t.add(e);const s=[];if(i.children){const t=i.children;for(let i=0,a=t.length;i<a;i++){const a=t[i];s.push(D(a,e,n,r))}}return Promise.all(s)}))}function B(e,t,n){const r=t.attributes,i=[];function a(t,s){return n.getDependency("accessor",t).then((function(t){e.setAttribute(s,t)}))}for(const t in r){const n=L[t]||t.toLowerCase();n in e.attributes||i.push(a(r[t],n))}if(void 0!==t.indices&&!e.index){const s=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));i.push(s)}return I(e,t),function(e,t,n){const r=t.attributes,i=new s.Box3;if(void 0===r.POSITION)return;{const e=n.json.accessors[r.POSITION],t=e.min,a=e.max;if(void 0===t||void 0===a)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(i.set(new s.Vector3(t[0],t[1],t[2]),new s.Vector3(a[0],a[1],a[2])),e.normalized){const t=U(S[e.componentType]);i.min.multiplyScalar(t),i.max.multiplyScalar(t)}}const a=t.targets;if(void 0!==a){const e=new s.Vector3,t=new s.Vector3;for(let s=0,r=a.length;s<r;s++){const r=a[s];if(void 0!==r.POSITION){const s=n.json.accessors[r.POSITION],i=s.min,a=s.max;if(void 0!==i&&void 0!==a){if(t.setX(Math.max(Math.abs(i[0]),Math.abs(a[0]))),t.setY(Math.max(Math.abs(i[1]),Math.abs(a[1]))),t.setZ(Math.max(Math.abs(i[2]),Math.abs(a[2]))),s.normalized){const e=U(S[s.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(e)}e.boundingBox=i;const o=new s.Sphere;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=o}(e,t,n),Promise.all(i).then((function(){return void 0!==t.targets?function(e,t,n){let s=!1,r=!1;for(let e=0,n=t.length;e<n;e++){const n=t[e];if(void 0!==n.POSITION&&(s=!0),void 0!==n.NORMAL&&(r=!0),s&&r)break}if(!s&&!r)return Promise.resolve(e);const i=[],a=[];for(let o=0,l=t.length;o<l;o++){const l=t[o];if(s){const t=void 0!==l.POSITION?n.getDependency("accessor",l.POSITION):e.attributes.position;i.push(t)}if(r){const t=void 0!==l.NORMAL?n.getDependency("accessor",l.NORMAL):e.attributes.normal;a.push(t)}}return Promise.all([Promise.all(i),Promise.all(a)]).then((function(t){const n=t[0],i=t[1];return s&&(e.morphAttributes.position=n),r&&(e.morphAttributes.normal=i),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function G(e,t){let n=e.getIndex();if(null===n){const t=[],s=e.getAttribute("position");if(void 0===s)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<s.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const r=n.count-2,i=[];if(t===s.TriangleFanDrawMode)for(let e=1;e<=r;e++)i.push(n.getX(0)),i.push(n.getX(e)),i.push(n.getX(e+1));else for(let e=0;e<r;e++)e%2==0?(i.push(n.getX(e)),i.push(n.getX(e+1)),i.push(n.getX(e+2))):(i.push(n.getX(e+2)),i.push(n.getX(e+1)),i.push(n.getX(e)));i.length/3!==r&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const a=e.clone();return a.setIndex(i),a}},1031:(e,t,n)=>{"use strict";var s,r=n(4391),i=n(2772),a=n(4786),o=n(2513),l=n(6382),c="auto",u="justify",h="left",p="middle",d="normal",m=" ",f=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],g=f.length;function v(){return s||(s=r.Z.createCanvasElement().getContext("2d"))}class x extends a.b{constructor(e){super(function(e){return(e=e||{}).fillLinearGradientColorStops||e.fillRadialGradientColorStops||e.fillPatternImage||(e.fill=e.fill||"black"),e}(e)),this._partialTextX=0,this._partialTextY=0;for(var t=0;t<g;t++)this.on(f[t]+"Change.konva",this._setTextData);this._setTextData()}_sceneFunc(e){var t=this.textArr,n=t.length;if(this.text()){var s,r,i=this.padding(),a=this.fontSize(),o=this.lineHeight()*a,l=this.verticalAlign(),c=0,d=this.align(),m=this.getWidth(),f=this.letterSpacing(),g=this.fill(),v=this.textDecoration(),x=-1!==v.indexOf("underline"),T=-1!==v.indexOf("line-through"),y=0,b=(y=o/2,0),M=0;for(e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",p),e.setAttr("textAlign",h),l===p?c=(this.getHeight()-n*o-2*i)/2:"bottom"===l&&(c=this.getHeight()-n*o-2*i),e.translate(i,c+i),s=0;s<n;s++){b=0,M=0;var w,_,S,A=t[s],E=A.text,R=A.width,L=s!==n-1;if(e.save(),"right"===d?b+=m-R-2*i:"center"===d&&(b+=(m-R-2*i)/2),x&&(e.save(),e.beginPath(),e.moveTo(b,y+M+Math.round(a/2)),_=0==(w=E.split(" ").length-1),S=d===u&&L&&!_?m-2*i:R,e.lineTo(b+Math.round(S),y+M+Math.round(a/2)),e.lineWidth=a/15,e.strokeStyle=g,e.stroke(),e.restore()),T&&(e.save(),e.beginPath(),e.moveTo(b,y+M),_=0==(w=E.split(" ").length-1),S=d===u&&L&&!_?m-2*i:R,e.lineTo(b+Math.round(S),y+M),e.lineWidth=a/15,e.strokeStyle=g,e.stroke(),e.restore()),0!==f||d===u){w=E.split(" ").length-1;for(var P=(r=E,Array.from(r)),O=0;O<P.length;O++){var C=P[O];" "===C&&s!==n-1&&d===u&&(b+=(m-2*i-R)/w),this._partialTextX=b,this._partialTextY=y+M,this._partialText=C,e.fillStrokeShape(this),b+=this.measureSize(C).width+f}}else this._partialTextX=b,this._partialTextY=y+M,this._partialText=E,e.fillStrokeShape(this);e.restore(),n>1&&(y+=o)}}}_hitFunc(e){var t=this.getWidth(),n=this.getHeight();e.beginPath(),e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this)}setText(e){var t=r.Z._isString(e)?e:null==e?"":e+"";return this._setAttr("text",t),this}getWidth(){return this.attrs.width===c||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width}getHeight(){return this.attrs.height===c||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return r.Z.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var t,n=v(),s=this.fontSize();return n.save(),n.font=this._getContextFont(),t=n.measureText(e),n.restore(),{width:t.width,height:s}}_getContextFont(){return this.fontStyle()+m+this.fontVariant()+m+(this.fontSize()+"px ")+this.fontFamily().split(",").map((e=>{const t=(e=e.trim()).indexOf(" ")>=0,n=e.indexOf('"')>=0||e.indexOf("'")>=0;return t&&!n&&(e=`"${e}"`),e})).join(", ")}_addTextLine(e){this.align()===u&&(e=e.trim());var t=this._getTextWidth(e);return this.textArr.push({text:e,width:t})}_getTextWidth(e){var t=this.letterSpacing(),n=e.length;return v().measureText(e).width+(n?t*(n-1):0)}_setTextData(){var e=this.text().split("\n"),t=+this.fontSize(),n=0,s=this.lineHeight()*t,r=this.attrs.width,i=this.attrs.height,a=r!==c&&void 0!==r,o=i!==c&&void 0!==i,l=this.padding(),u=r-2*l,h=i-2*l,p=0,d=this.wrap(),f="none"!==d,g="char"!==d&&f,x=this.ellipsis();this.textArr=[],v().font=this._getContextFont();for(var T=x?this._getTextWidth(""):0,y=0,b=e.length;y<b;++y){var M=e[y],w=this._getTextWidth(M);if(a&&w>u)for(;M.length>0;){for(var _=0,S=M.length,A="",E=0;_<S;){var R=_+S>>>1,L=M.slice(0,R+1),P=this._getTextWidth(L)+T;P<=u?(_=R+1,A=L,E=P):S=R}if(!A)break;if(g){var O,C=M[A.length];(O=(C===m||"-"===C)&&E<=u?A.length:Math.max(A.lastIndexOf(m),A.lastIndexOf("-"))+1)>0&&(_=O,A=A.slice(0,_),E=this._getTextWidth(A))}if(A=A.trimRight(),this._addTextLine(A),n=Math.max(n,E),p+=s,!f||o&&p+s>h){var N=this.textArr[this.textArr.length-1];N&&x&&(this._getTextWidth(N.text+"")<u||(N.text=N.text.slice(0,N.text.length-3)),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(N.text+""));break}if((M=(M=M.slice(_)).trimLeft()).length>0&&(w=this._getTextWidth(M))<=u){this._addTextLine(M),p+=s,n=Math.max(n,w);break}}else this._addTextLine(M),p+=s,n=Math.max(n,w);if(o&&p+s>h)break}this.textHeight=t,this.textWidth=n}getStrokeScaleEnabled(){return!0}}x.prototype._fillFunc=function(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)},x.prototype._strokeFunc=function(e){e.strokeText(this._partialText,this._partialTextX,this._partialTextY)},x.prototype.className="Text",x.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,l.DA)(x),i.F.overWriteSetter(x,"width",(0,o.hi)()),i.F.overWriteSetter(x,"height",(0,o.hi)()),i.F.addGetterSetter(x,"fontFamily","Arial"),i.F.addGetterSetter(x,"fontSize",12,(0,o.Kg)()),i.F.addGetterSetter(x,"fontStyle",d),i.F.addGetterSetter(x,"fontVariant",d),i.F.addGetterSetter(x,"padding",0,(0,o.Kg)()),i.F.addGetterSetter(x,"align",h),i.F.addGetterSetter(x,"verticalAlign","top"),i.F.addGetterSetter(x,"lineHeight",1,(0,o.Kg)()),i.F.addGetterSetter(x,"wrap","word"),i.F.addGetterSetter(x,"ellipsis",!1,(0,o.I0)()),i.F.addGetterSetter(x,"letterSpacing",0,(0,o.Kg)()),i.F.addGetterSetter(x,"text","",(0,o.sY)()),i.F.addGetterSetter(x,"textDecoration","")}}]);
//# sourceMappingURL=674.chunk.js.map